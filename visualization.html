<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asthma Prediction System - Visualization</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <i class="fas fa-lungs fa-2x"></i>
                <h2>Asthma Prediction</h2>
            </div>
            <div class="sidebar-menu">
                <a href="dashboard.html" class="menu-item">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
                <a href="data_exploration.html" class="menu-item">
                    <i class="fas fa-database"></i>
                    <span>Data Exploration</span>
                </a>
                <a href="prediction.html" class="menu-item">
                    <i class="fas fa-brain"></i>
                    <span>Prediction</span>
                </a>
                <a href="visualization.html" class="menu-item active">
                    <i class="fas fa-chart-line"></i>
                    <span>Visualization</span>
                </a>
                <a href="login.html" class="menu-item">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </a>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="top-bar">
                <div class="page-title">Data Visualization</div>
                <div class="user-info">
                    <img src="https://ui-avatars.com/api/?name=Aparna&background=4a6fa5&color=fff" alt="User Avatar">
                    <span class="user-name">Aparna</span>
                    <a href="login.html" class="logout-btn">
                        <i class="fas fa-sign-out-alt"></i>
                    </a>
                </div>
            </div>

            <!-- Visualization Content -->
            <div class="page-transition active">
                <!-- Visualization Controls -->
                <div class="card" style="margin-bottom: 30px;">
                    <div class="card-header">
                        <div class="card-title">Visualization Controls</div>
                    </div>
                    <div style="display: flex; gap: 20px; margin-top: 20px;">
                        <div style="flex: 1;">
                            <label for="chart-type" style="display: block; margin-bottom: 8px; font-weight: 500;">Chart Type</label>
                            <select id="chart-type" style="width: 100%; padding: 10px; border-radius: 6px; border: 1px solid #ddd;">
                                <option value="model-comparison">Model Comparison</option>
                                <option value="feature-importance">Feature Importance</option>
                                <option value="confusion-matrix">Confusion Matrix</option>
                                <option value="age-distribution">Age Distribution</option>
                                <option value="symptom-correlation">Symptom Correlation</option>
                            </select>
                        </div>
                        <div style="flex: 1;">
                            <label for="model-select" style="display: block; margin-bottom: 8px; font-weight: 500;">Model</label>
                            <select id="model-select" style="width: 100%; padding: 10px; border-radius: 6px; border: 1px solid #ddd;">
                                <option value="all">All Models</option>
                                <option value="rf">Random Forest</option>
                                <option value="svm">Support Vector Machine</option>
                                <option value="knn">K-Nearest Neighbors</option>
                            </select>
                        </div>
                        <div style="flex: 1;">
                            <label for="data-filter" style="display: block; margin-bottom: 8px; font-weight: 500;">Data Filter</label>
                            <select id="data-filter" style="width: 100%; padding: 10px; border-radius: 6px; border: 1px solid #ddd;">
                                <option value="all">All Data</option>
                                <option value="positive">Positive Diagnosis Only</option>
                                <option value="negative">Negative Diagnosis Only</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Main Visualization -->
                <div class="visualization-card">
                    <div class="visualization-header">
                        <div class="visualization-title" id="visualization-title">Model Performance Comparison</div>
                        <div class="visualization-controls">
                            <button class="visualization-control" id="download-chart">
                                <i class="fas fa-download"></i> Download
                            </button>
                            <button class="visualization-control" id="fullscreen-chart">
                                <i class="fas fa-expand"></i> Fullscreen
                            </button>
                        </div>
                    </div>
                    <div class="visualization-chart-container">
                        <canvas id="mainVisualizationChart"></canvas>
                    </div>
                    <div class="visualization-description" id="visualization-description">
                        This chart compares the performance metrics of different machine learning models used for asthma prediction. Random Forest shows the highest accuracy at 87.2%, followed by SVM at 83.5% and KNN at 79.1%.
                    </div>
                </div>

                <!-- Secondary Visualizations -->
                <div class="charts-container" style="margin-top: 30px;">
                    <div class="chart-card">
                        <div class="chart-header">
                            <div class="chart-title">Confusion Matrix - Random Forest</div>
                        </div>
                        <div class="chart-container">
                            <canvas id="confusionMatrixChart"></canvas>
                        </div>
                    </div>

                    <div class="chart-card">
                        <div class="chart-header">
                            <div class="chart-title">ROC Curve Comparison</div>
                        </div>
                        <div class="chart-container">
                            <canvas id="rocCurveChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Feature Analysis -->
                <div class="visualization-card" style="margin-top: 30px;">
                    <div class="visualization-header">
                        <div class="visualization-title">Feature Analysis</div>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-top: 20px;">
                        <div>
                            <canvas id="ageAnalysisChart" height="250"></canvas>
                        </div>
                        <div>
                            <canvas id="bmiAnalysisChart" height="250"></canvas>
                        </div>
                        <div>
                            <canvas id="genderAnalysisChart" height="250"></canvas>
                        </div>
                        <div>
                            <canvas id="smokingAnalysisChart" height="250"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize charts when the page loads
        window.addEventListener('DOMContentLoaded', function() {
            // Create main visualization chart (default: model comparison)
            createModelComparisonChart();
            
            // Create confusion matrix chart
            createConfusionMatrixChart();
            
            // Create ROC curve chart
            createROCCurveChart();
            
            // Create feature analysis charts
            createAgeAnalysisChart();
            createBMIAnalysisChart();
            createGenderAnalysisChart();
            createSmokingAnalysisChart();
            
            // Add event listeners for visualization controls
            document.getElementById('chart-type').addEventListener('change', updateMainVisualization);
            document.getElementById('model-select').addEventListener('change', updateMainVisualization);
            document.getElementById('data-filter').addEventListener('change', updateMainVisualization);
            
            document.getElementById('download-chart').addEventListener('click', function() {
                alert('Chart download started. The image will be saved to your downloads folder.');
            });
            
            document.getElementById('fullscreen-chart').addEventListener('click', function() {
                alert('Fullscreen mode is not available in this demo.');
            });
        });
        
        // Function to update the main visualization based on selected options
        function updateMainVisualization() {
            const chartType = document.getElementById('chart-type').value;
            const modelSelect = document.getElementById('model-select').value;
            const dataFilter = document.getElementById('data-filter').value;
            
            // Clear the existing chart
            const chartContainer = document.getElementById('mainVisualizationChart');
            chartContainer.remove();
            const newCanvas = document.createElement('canvas');
            newCanvas.id = 'mainVisualizationChart';
            document.querySelector('.visualization-chart-container').appendChild(newCanvas);
            
            // Update the chart based on selected type
            switch(chartType) {
                case 'model-comparison':
                    createModelComparisonChart();
                    document.getElementById('visualization-title').textContent = 'Model Performance Comparison';
                    document.getElementById('visualization-description').textContent = 'This chart compares the performance metrics of different machine learning models used for asthma prediction. Random Forest shows the highest accuracy at 87.2%, followed by SVM at 83.5% and KNN at 79.1%.';
                    break;
                case 'feature-importance':
                    createFeatureImportanceChart(modelSelect);
                    document.getElementById('visualization-title').textContent = 'Feature Importance';
                    document.getElementById('visualization-description').textContent = 'This chart shows the importance of different features in predicting asthma diagnosis. Wheezing, shortness of breath, and chest tightness are the most important predictors.';
                    break;
                case 'confusion-matrix':
                    createConfusionMatrixVisualization(modelSelect);
                    document.getElementById('visualization-title').textContent = 'Confusion Matrix';
                    document.getElementById('visualization-description').textContent = 'The confusion matrix shows the performance of the classification model. It displays the true positives, false positives, true negatives, and false negatives.';
                    break;
                case 'age-distribution':
                    createAgeDistributionChart(dataFilter);
                    document.getElementById('visualization-title').textContent = 'Age Distribution';
                    document.getElementById('visualization-description').textContent = 'This chart shows the distribution of patients across different age groups, with separate bars for positive and negative asthma diagnoses.';
                    break;
                case 'symptom-correlation':
                    createSymptomCorrelationChart();
                    document.getElementById('visualization-title').textContent = 'Symptom Correlation with Diagnosis';
                    document.getElementById('visualization-description').textContent = 'This chart shows the correlation between different symptoms and asthma diagnosis. Wheezing and shortness of breath have the strongest correlation with positive diagnosis.';
                    break;
            }
        }
        
        // Create model comparison chart
        function createModelComparisonChart() {
            const ctx = document.getElementById('mainVisualizationChart').getContext('2d');
            const chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Random Forest', 'SVM', 'KNN'],
                    datasets: [
                        {
                            label: 'Accuracy',
                            data: [0.872, 0.835, 0.791],
                            backgroundColor: 'rgba(75, 192, 192, 0.6)',
                            borderColor: 'rgba(75, 192, 192, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'Precision',
                            data: [0.891, 0.843, 0.802],
                            backgroundColor: 'rgba(54, 162, 235, 0.6)',
                            borderColor: 'rgba(54, 162, 235, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'Recall',
                            data: [0.863, 0.827, 0.783],
                            backgroundColor: 'rgba(255, 99, 132, 0.6)',
                            borderColor: 'rgba(255, 99, 132, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'F1 Score',
                            data: [0.877, 0.835, 0.792],
                            backgroundColor: 'rgba(255, 159, 64, 0.6)',
                            borderColor: 'rgba(255, 159, 64, 1)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 1,
                            title: {
                                display: true,
                                text: 'Score'
                            },
                            ticks: {
                                callback: function(value) {
                                    return (value * 100).toFixed(0) + '%';
                                }
                            }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'Model Performance Metrics'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + (context.raw * 100).toFixed(1) + '%';
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Create feature importance chart
        function createFeatureImportanceChart(model) {
            const ctx = document.getElementById('mainVisualizationChart').getContext('2d');
            
            // Different feature importance based on selected model
            let featureImportance;
            
            if (model === 'svm') {
                featureImportance = {
                    labels: ['Wheezing', 'Shortness of Breath', 'Chest Tightness', 'Family History', 'Coughing', 'Nighttime Symptoms', 'Exercise Induced', 'Age', 'BMI', 'Smoking'],
                    values: [0.21, 0.19, 0.16, 0.11, 0.10, 0.07, 0.06, 0.05, 0.03, 0.02]
                };
            } else if (model === 'knn') {
                featureImportance = {
                    labels: ['Wheezing', 'Chest Tightness', 'Shortness of Breath', 'Coughing', 'Family History', 'Exercise Induced', 'Nighttime Symptoms', 'BMI', 'Smoking', 'Age'],
                    values: [0.22, 0.20, 0.17, 0.13, 0.08, 0.07, 0.05, 0.04, 0.03, 0.01]
                };
            } else {
                // Default to Random Forest
                featureImportance = {
                    labels: ['Wheezing', 'Shortness of Breath', 'Chest Tightness', 'Coughing', 'Family History', 'Nighttime Symptoms', 'Exercise Induced', 'BMI', 'Age', 'Smoking'],
                    values: [0.23, 0.18, 0.15, 0.12, 0.09, 0.08, 0.06, 0.04, 0.03, 0.02]
                };
            }
            
            const chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: featureImportance.labels,
                    datasets: [{
                        label: 'Feature Importance',
                        data: featureImportance.values,
                        backgroundColor: 'rgba(75, 192, 192, 0.6)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Feature Importance for Asthma Prediction'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `Importance: ${(context.raw * 100).toFixed(1)}%`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Importance'
                            },
                            ticks: {
                                callback: function(value) {
                                    return (value * 100).toFixed(0) + '%';
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Create confusion matrix visualization
        function createConfusionMatrixVisualization(model) {
            const ctx = document.getElementById('mainVisualizationChart').getContext('2d');
            
            // Different confusion matrices based on selected model
            let confusionMatrix;
            
            if (model === 'svm') {
                confusionMatrix = {
                    trueNegative: 112,
                    falsePositive: 18,
                    falseNegative: 12,
                    truePositive: 43
                };
            } else if (model === 'knn') {
                confusionMatrix = {
                    trueNegative: 108,
                    falsePositive: 22,
                    falseNegative: 16,
                    truePositive: 39
                };
            } else {
                // Default to Random Forest
                confusionMatrix = {
                    trueNegative: 118,
                    falsePositive: 12,
                    falseNegative: 10,
                    truePositive: 45
                };
            }
            
            const data = {
                labels: ['Predicted Negative', 'Predicted Positive'],
                datasets: [
                    {
                        label: 'Confusion Matrix',
                        data: [
                            confusionMatrix.trueNegative,
                            confusionMatrix.falsePositive,
                            confusionMatrix.falseNegative,
                            confusionMatrix.truePositive
                        ],
                        backgroundColor: [
                            'rgba(75, 192, 192, 0.6)',
                            'rgba(255, 99, 132, 0.6)',
                            'rgba(255, 99, 132, 0.6)',
                            'rgba(75, 192, 192, 0.6)'
                        ],
                        borderColor: [
                            'rgba(75, 192, 192, 1)',
                            'rgba(255, 99, 132, 1)',
                            'rgba(255, 99, 132, 1)',
                            'rgba(75, 192, 192, 1)'
                        ],
                        borderWidth: 1
                    }
                ]
            };
            
            const config = {
                type: 'matrix',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Confusion Matrix'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const value = context.dataset.data[context.dataIndex];
                                    const i = Math.floor(context.dataIndex / 2);
                                    const j = context.dataIndex % 2;
                                    const labels = ['True Negative', 'False Positive', 'False Negative', 'True Positive'];
                                    return `${labels[i * 2 + j]}: ${value}`;
                                }
                            }
                        }
                    }
                }
            };
            
            // Since Chart.js doesn't have a built-in matrix chart type, we'll simulate it with a custom chart
            // For a real application, you might want to use a library that supports confusion matrices directly
            
            // Create a 2x2 grid to represent the confusion matrix
            const total = confusionMatrix.trueNegative + confusionMatrix.falsePositive + 
                         confusionMatrix.falseNegative + confusionMatrix.truePositive;
            
            const chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['True Negative', 'False Positive', 'False Negative', 'True Positive'],
                    datasets: [{
                        label: 'Count',
                        data: [
                            confusionMatrix.trueNegative,
                            confusionMatrix.falsePositive,
                            confusionMatrix.falseNegative,
                            confusionMatrix.truePositive
                        ],
                        backgroundColor: [
                            'rgba(75, 192, 192, 0.6)',
                            'rgba(255, 99, 132, 0.6)',
                            'rgba(255, 99, 132, 0.6)',
                            'rgba(75, 192, 192, 0.6)'
                        ],
                        borderColor: [
                            'rgba(75, 192, 192, 1)',
                            'rgba(255, 99, 132, 1)',
                            'rgba(255, 99, 132, 1)',
                            'rgba(75, 192, 192, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Confusion Matrix'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const value = context.raw;
                                    const percentage = ((value / total) * 100).toFixed(1);
                                    return `Count: ${value} (${percentage}%)`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Count'
                            }
                        }
                    }
                }
            });
        }
        
        // Create age distribution chart
        function createAgeDistributionChart(filter) {
            const ctx = document.getElementById('mainVisualizationChart').getContext('2d');
            
            // Sample data for age distribution
            const ageGroups = ['0-10', '11-20', '21-30', '31-40', '41-50', '51-60', '61-70', '71-80'];
            const positiveData = [18, 25, 42, 68, 82, 73, 58, 24];
            const negativeData = [24, 43, 82, 88, 101, 92, 74, 30];
            
            let datasets = [];
            
            if (filter === 'positive') {
                datasets = [{
                    label: 'Positive Diagnosis',
                    data: positiveData,
                    backgroundColor: 'rgba(255, 99, 132, 0.6)',
                    borderColor: 'rgba(255, 99, 132, 1)',
                    borderWidth: 1
                }];
            } else if (filter === 'negative') {
                datasets = [{
                    label: 'Negative Diagnosis',
                    data: negativeData,
                    backgroundColor: 'rgba(75, 192, 192, 0.6)',
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 1
                }];
            } else {
                // Default to showing both
                datasets = [
                    {
                        label: 'Positive Diagnosis',
                        data: positiveData,
                        backgroundColor: 'rgba(255, 99, 132, 0.6)',
                        borderColor: 'rgba(255, 99, 132, 1)',
                        borderWidth: 1
                    },
                    {
                        label: 'Negative Diagnosis',
                        data: negativeData,
                        backgroundColor: 'rgba(75, 192, 192, 0.6)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    }
                ];
            }
            
            const chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ageGroups,
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Age Distribution by Diagnosis'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Number of Patients'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Age Group'
                            }
                        }
                    }
                }
            });
        }
        
        // Create symptom correlation chart
        function createSymptomCorrelationChart() {
            const ctx = document.getElementById('mainVisualizationChart').getContext('2d');
            
            const chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Wheezing', 'Shortness of Breath', 'Chest Tightness', 'Coughing', 'Nighttime Symptoms', 'Exercise Induced'],
                    datasets: [{
                        label: 'Correlation with Positive Diagnosis',
                        data: [0.68, 0.62, 0.57, 0.53, 0.48, 0.45],
                        backgroundColor: 'rgba(255, 99, 132, 0.6)',
                        borderColor: 'rgba(255, 99, 132, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Symptom Correlation with Asthma Diagnosis'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `Correlation: ${(context.raw * 100).toFixed(1)}%`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 1,
                            title: {
                                display: true,
                                text: 'Correlation Coefficient'
                            },
                            ticks: {
                                callback: function(value) {
                                    return (value * 100).toFixed(0) + '%';
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Create confusion matrix chart
        function createConfusionMatrixChart() {
            const ctx = document.getElementById('confusionMatrixChart').getContext('2d');
            
            // Create a heatmap-like visualization for the confusion matrix
            const chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['True Negative', 'False Positive', 'False Negative', 'True Positive'],
                    datasets: [{
                        label: 'Count',
                        data: [118, 12, 10, 45],
                        backgroundColor: [
                            'rgba(75, 192, 192, 0.6)',
                            'rgba(255, 99, 132, 0.6)',
                            'rgba(255, 99, 132, 0.6)',
                            'rgba(75, 192, 192, 0.6)'
                        ],
                        borderColor: [
                            'rgba(75, 192, 192, 1)',
                            'rgba(255, 99, 132, 1)',
                            'rgba(255, 99, 132, 1)',
                            'rgba(75, 192, 192, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Confusion Matrix - Random Forest'
                        }
                    }
                }
            });
        }
        
        // Create ROC curve chart
        function createROCCurveChart() {
            const ctx = document.getElementById('rocCurveChart').getContext('2d');
            
            // Sample data points for ROC curves
            const rfPoints = [
                {x: 0, y: 0},
                {x: 0.05, y: 0.35},
                {x: 0.1, y: 0.58},
                {x: 0.2, y: 0.78},
                {x: 0.3, y: 0.88},
                {x: 0.4, y: 0.92},
                {x: 0.5, y: 0.95},
                {x: 0.6, y: 0.97},
                {x: 0.7, y: 0.98},
                {x: 0.8, y: 0.99},
                {x: 0.9, y: 0.995},
                {x: 1, y: 1}
            ];
            
            const svmPoints = [
                {x: 0, y: 0},
                {x: 0.05, y: 0.32},
                {x: 0.1, y: 0.55},
                {x: 0.2, y: 0.75},
                {x: 0.3, y: 0.85},
                {x: 0.4, y: 0.89},
                {x: 0.5, y: 0.92},
                {x: 0.6, y: 0.94},
                {x: 0.7, y: 0.96},
                {x: 0.8, y: 0.97},
                {x: 0.9, y: 0.99},
                {x: 1, y: 1}
            ];
            
            const knnPoints = [
                {x: 0, y: 0},
                {x: 0.05, y: 0.28},
                {x: 0.1, y: 0.50},
                {x: 0.2, y: 0.70},
                {x: 0.3, y: 0.80},
                {x: 0.4, y: 0.85},
                {x: 0.5, y: 0.89},
                {x: 0.6, y: 0.92},
                {x: 0.7, y: 0.94},
                {x: 0.8, y: 0.96},
                {x: 0.9, y: 0.98},
                {x: 1, y: 1}
            ];
            
            // Reference line (random classifier)
            const referencePoints = [
                {x: 0, y: 0},
                {x: 1, y: 1}
            ];
            
            const chart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [
                        {
                            label: 'Random Forest (AUC = 0.91)',
                            data: rfPoints,
                            backgroundColor: 'rgba(75, 192, 192, 0.6)',
                            borderColor: 'rgba(75, 192, 192, 1)',
                            borderWidth: 2,
                            showLine: true,
                            tension: 0.4
                        },
                        {
                            label: 'SVM (AUC = 0.88)',
                            data: svmPoints,
                            backgroundColor: 'rgba(54, 162, 235, 0.6)',
                            borderColor: 'rgba(54, 162, 235, 1)',
                            borderWidth: 2,
                            showLine: true,
                            tension: 0.4
                        },
                        {
                            label: 'KNN (AUC = 0.84)',
                            data: knnPoints,
                            backgroundColor: 'rgba(255, 99, 132, 0.6)',
                            borderColor: 'rgba(255, 99, 132, 1)',
                            borderWidth: 2,
                            showLine: true,
                            tension: 0.4
                        },
                        {
                            label: 'Random Classifier',
                            data: referencePoints,
                            backgroundColor: 'rgba(200, 200, 200, 0.6)',
                            borderColor: 'rgba(200, 200, 200, 1)',
                            borderWidth: 2,
                            borderDash: [5, 5],
                            showLine: true,
                            pointRadius: 0
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'ROC Curve Comparison'
                        }
                    },
                    scales: {
                        x: {
                            type: 'linear',
                            position: 'bottom',
                            min: 0,
                            max: 1,
                            title: {
                                display: true,
                                text: 'False Positive Rate'
                            }
                        },
                        y: {
                            min: 0,
                            max: 1,
                            title: {
                                display: true,
                                text: 'True Positive Rate'
                            }
                        }
                    }
                }
            });
        }
        
        // Create age analysis chart
        function createAgeAnalysisChart() {
            const ctx = document.getElementById('ageAnalysisChart').getContext('2d');
            
            const chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['0-20', '21-40', '41-60', '61-80'],
                    datasets: [
                        {
                            label: 'Positive',
                            data: [43, 110, 155, 82],
                            backgroundColor: 'rgba(255, 99, 132, 0.6)',
                            borderColor: 'rgba(255, 99, 132, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'Negative',
                            data: [67, 170, 193, 104],
                            backgroundColor: 'rgba(75, 192, 192, 0.6)',
                            borderColor: 'rgba(75, 192, 192, 1)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Age Group Analysis'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Count'
                            }
                        }
                    }
                }
            });
        }
        
        // Create BMI analysis chart
        function createBMIAnalysisChart() {
            const ctx = document.getElementById('bmiAnalysisChart').getContext('2d');
            
            const chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Underweight (<18.5)', 'Normal (18.5-24.9)', 'Overweight (25-29.9)', 'Obese (≥30)'],
                    datasets: [
                        {
                            label: 'Positive',
                            data: [28, 95, 132, 135],
                            backgroundColor: 'rgba(255, 99, 132, 0.6)',
                            borderColor: 'rgba(255, 99, 132, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'Negative',
                            data: [42, 168, 175, 149],
                            backgroundColor: 'rgba(75, 192, 192, 0.6)',
                            borderColor: 'rgba(75, 192, 192, 1)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'BMI Category Analysis'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Count'
                            }
                        }
                    }
                }
            });
        }
        
        // Create gender analysis chart
        function createGenderAnalysisChart() {
            const ctx = document.getElementById('genderAnalysisChart').getContext('2d');
            
            const chart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Female - Positive', 'Female - Negative', 'Male - Positive', 'Male - Negative'],
                    datasets: [{
                        data: [198, 282, 192, 252],
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.6)',
                            'rgba(75, 192, 192, 0.6)',
                            'rgba(255, 159, 64, 0.6)',
                            'rgba(54, 162, 235, 0.6)'
                        ],
                        borderColor: [
                            'rgba(255, 99, 132, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(255, 159, 64, 1)',
                            'rgba(54, 162, 235, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Gender Distribution'
                        }
                    }
                }
            });
        }
        
        // Create smoking analysis chart
        function createSmokingAnalysisChart() {
            const ctx = document.getElementById('smokingAnalysisChart').getContext('2d');
            
            const chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Smoker', 'Non-Smoker'],
                    datasets: [
                        {
                            label: 'Positive',
                            data: [98, 292],
                            backgroundColor: 'rgba(255, 99, 132, 0.6)',
                            borderColor: 'rgba(255, 99, 132, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'Negative',
                            data: [112, 422],
                            backgroundColor: 'rgba(75, 192, 192, 0.6)',
                            borderColor: 'rgba(75, 192, 192, 1)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Smoking Status Analysis'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Count'
                            }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>